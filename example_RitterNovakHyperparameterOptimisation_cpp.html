<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SG++-Doxygen-Documentation: RitterNovakHyperparameterOptimisation.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
MathJax.Hub.Config({
  TeX: {
    Macros: {
      vec: ["\\boldsymbol{#1}", 1],
      opt: "\\mathrm{opt}",
      norm: ["\\lVert{#1}\\rVert", 1]
    }
  }
}); 
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="sgpp_logo_small.png"/></td>
  <td id="projectalign">
   <div id="projectname">SG++-Doxygen-Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('example_RitterNovakHyperparameterOptimisation_cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">RitterNovakHyperparameterOptimisation.cpp</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This example can be found under <code>optimization/examples/RitterNovakHyperparameterOptimisation.cpp</code>.</p>
<div class="fragment"><div class="line"><span class="comment">// Copyright (C) 2008-today The SG++ project</span></div>
<div class="line"><span class="comment">// This file is part of the SG++ project. For conditions of distribution and</span></div>
<div class="line"><span class="comment">// use, please see the copyright notice provided with SG++ or at</span></div>
<div class="line"><span class="comment">// sgpp.sparsegrids.org</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Example file demonstrating the use of IterativeGridGeneratorRitterNovak</span></div>
<div class="line"><span class="comment">// and IterativeGridGeneratorFullAdaptiveRitterNovak from the SGpp optimization</span></div>
<div class="line"><span class="comment">// module.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// To fully enable this example, ensure that the following dependencies are installed (otherwise you</span></div>
<div class="line"><span class="comment">// will get a slightly limited functionality):</span></div>
<div class="line"><span class="comment">// 1. [libgp](https://github.com/mblum/libgp#building-and-testing)</span></div>
<div class="line"><span class="comment">// 2. [BayesOpt](https://rmcantin.github.io/bayesopt/html/install.html)</span></div>
<div class="line"><span class="comment">// Additionally, compile SGpp with the `USE_LIBGP` and `USE_BAYESOPT` options enabled.</span></div>
<div class="line"><span class="comment">// Note: Before compiling SGpp, verify that libgp and BayesOpt are installed system-wide.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// define if a bayesopt is available for hyperparameter optimization</span></div>
<div class="line"><span class="preprocessor">#ifdef USE_BAYESOPT</span></div>
<div class="line"><span class="preprocessor">#include &lt;bayesopt/bayesopt.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Other library headers</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="DataVector_8hpp.html">sgpp/base/datatypes/DataVector.hpp</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="ScalarFunction_8hpp.html">sgpp/base/function/scalar/ScalarFunction.hpp</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Grid_8hpp.html">sgpp/base/grid/Grid.hpp</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="BaseOpFactory_8hpp.html">sgpp/base/operation/BaseOpFactory.hpp</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Printer_8hpp.html">sgpp/base/tools/Printer.hpp</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Auto_8hpp.html">sgpp/base/tools/sle/solver/Auto.hpp</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="HierarchisationSLE_8hpp.html">sgpp/base/tools/sle/system/HierarchisationSLE.hpp</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="IterativeGridGeneratorFullAdaptiveRitterNovak_8hpp.html">sgpp/optimization/gridgen/IterativeGridGeneratorFullAdaptiveRitterNovak.hpp</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="IterativeGridGeneratorRitterNovak_8hpp.html">sgpp/optimization/gridgen/IterativeGridGeneratorRitterNovak.hpp</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Rastrigin_8hpp.html">sgpp/optimization/test_problems/unconstrained/Rastrigin.hpp</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// C system headers</span></div>
<div class="line"><span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ctime&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// C++ system headers</span></div>
<div class="line"><span class="preprocessor">#include &lt;algorithm&gt;</span>  <span class="comment">// For std::sort, std::remove, std::max</span></div>
<div class="line"><span class="preprocessor">#include &lt;array&gt;</span>      <span class="comment">// For std::array</span></div>
<div class="line"><span class="preprocessor">#include &lt;chrono&gt;</span>     <span class="comment">// For std::chrono</span></div>
<div class="line"><span class="preprocessor">#include &lt;fstream&gt;</span>    <span class="comment">// For std::ofstream</span></div>
<div class="line"><span class="preprocessor">#include &lt;iomanip&gt;</span>    <span class="comment">// For std::put_time</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span>   <span class="comment">// For std::cout, std::endl, std::cerr</span></div>
<div class="line"><span class="preprocessor">#include &lt;limits&gt;</span>     <span class="comment">// For std::numeric_limits</span></div>
<div class="line"><span class="preprocessor">#include &lt;memory&gt;</span>     <span class="comment">// For std::unique_ptr, std::make_unique</span></div>
<div class="line"><span class="preprocessor">#include &lt;random&gt;</span>     <span class="comment">// For std::mt19937, std::uniform_real_distribution</span></div>
<div class="line"><span class="preprocessor">#include &lt;sstream&gt;</span>    <span class="comment">// For std::ostringstream</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdexcept&gt;</span>  <span class="comment">// For std::runtime_error, std::invalid_argument</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span>     <span class="comment">// For std::string</span></div>
<div class="line"><span class="preprocessor">#include &lt;tuple&gt;</span>      <span class="comment">// For std::make_tuple, std::get</span></div>
<div class="line"><span class="preprocessor">#include &lt;utility&gt;</span>    <span class="comment">// For std::pair, std::make_pair</span></div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span>     <span class="comment">// For std::vector</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using </span><a class="code hl_class" href="classsgpp_1_1base_1_1DataVector.html">sgpp::base::DataVector</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_class" href="classsgpp_1_1optimization_1_1IGGFARNHelper_1_1Hyperparameters.html">sgpp::optimization::IGGFARNHelper::Hyperparameters</a>;</div>
<div class="line"><span class="keyword">using </span>sgpp::optimization::IGGFARNHelper::operator&lt;&lt;;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_class" href="classsgpp_1_1optimization_1_1IGGFARNHelper_1_1UncertaintyBound.html">sgpp::optimization::IGGFARNHelper::UncertaintyBound</a>;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef USE_BAYESOPT</span></div>
<div class="line"><span class="keyword">class </span>HyperParameterFunction : <span class="keyword">public</span> bayesopt::ContinuousModel {</div>
<div class="line"> <span class="keyword">private</span>:</div>
<div class="line">  std::function&lt;double(<span class="keyword">const</span> vectord&amp;)&gt; evaluateSampleFunc;</div>
<div class="line"> </div>
<div class="line"> <span class="keyword">public</span>:</div>
<div class="line">  HyperParameterFunction(<span class="keyword">const</span> <span class="keywordtype">size_t</span> num_hyperparameter, <span class="keyword">const</span> bayesopt::Parameters&amp; par,</div>
<div class="line">                         <span class="keyword">const</span> std::function&lt;<span class="keywordtype">double</span>(<span class="keyword">const</span> vectord&amp;)&gt;&amp; evalFunc)</div>
<div class="line">      : ContinuousModel(num_hyperparameter, par), evaluateSampleFunc(evalFunc) {}</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">double</span> evaluateSample(<span class="keyword">const</span> vectord&amp; xin)<span class="keyword"> override </span>{ <span class="keywordflow">return</span> evaluateSampleFunc(xin); }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">std::ostream&amp; <a class="code hl_function" href="base_2src_2sgpp_2base_2tools_2json_2Node_8cpp.html#a662d12e45bdc25d7ea4429d5d62c8275">operator&lt;&lt;</a>(std::ostream&amp; os, <span class="keyword">const</span> bayesopt::Parameters&amp; parameters) {</div>
<div class="line">  os &lt;&lt; <span class="stringliteral">&quot;n_init_samples: &quot;</span> &lt;&lt; parameters.n_init_samples</div>
<div class="line">     &lt;&lt; <span class="stringliteral">&quot;, n_iterations: &quot;</span> &lt;&lt; parameters.n_iterations &lt;&lt; <span class="stringliteral">&quot;, random_seed: &quot;</span> &lt;&lt; parameters.random_seed</div>
<div class="line">     &lt;&lt; <span class="stringliteral">&quot;, noise: &quot;</span> &lt;&lt; parameters.noise &lt;&lt; <span class="stringliteral">&quot;, crit_name: &quot;</span> &lt;&lt; parameters.crit_name;</div>
<div class="line">  <span class="keywordflow">return</span> os;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> transformWeights(<span class="keyword">const</span> vectord&amp; p, std::vector&lt;double&gt;&amp; weights, <span class="keyword">const</span> <span class="keywordtype">double</span> current_value,</div>
<div class="line">                      <span class="keyword">const</span> <span class="keywordtype">size_t</span> root) {</div>
<div class="line">  <span class="keywordflow">if</span> (root &lt; <a class="code hl_variable" href="namespacefriedman.html#ac1dc8c3cf547e301788ad512096f9abc">p</a>.size()) {</div>
<div class="line">    transformWeights(p, weights, <a class="code hl_variable" href="namespacefriedman.html#ac1dc8c3cf547e301788ad512096f9abc">p</a>(root) * current_value, 2 * root + 1);</div>
<div class="line">    transformWeights(p, weights, (1 - <a class="code hl_variable" href="namespacefriedman.html#ac1dc8c3cf547e301788ad512096f9abc">p</a>(root)) * current_value, 2 * root + 2);</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    weights[root - <a class="code hl_variable" href="namespacefriedman.html#ac1dc8c3cf547e301788ad512096f9abc">p</a>.size()] = current_value;</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">std::string exec(<span class="keyword">const</span> std::string&amp; cmd) {</div>
<div class="line">  std::array&lt;char, 128&gt; buffer;</div>
<div class="line">  std::string result;</div>
<div class="line">  <span class="comment">// Use std::unique_ptr for automatic closing of the pipe</span></div>
<div class="line">  std::unique_ptr&lt;FILE, void (*)(FILE*)&gt; pipe(popen(cmd.c_str(), <span class="stringliteral">&quot;r&quot;</span>),</div>
<div class="line">                                              [](FILE* <a class="code hl_variable" href="AugmentedLagrangian_8cpp.html#ac2eaf9e806b463971eb23d43900a64be">f</a>) -&gt; <span class="keywordtype">void</span> { std::ignore = pclose(<a class="code hl_variable" href="AugmentedLagrangian_8cpp.html#ac2eaf9e806b463971eb23d43900a64be">f</a>); });</div>
<div class="line">  <span class="keywordflow">if</span> (!pipe) {</div>
<div class="line">    <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;popen() failed!&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">while</span> (fgets(buffer.data(), <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(buffer.size()), pipe.get()) != <span class="keyword">nullptr</span>) {</div>
<div class="line">    result += buffer.data();</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">std::string project_info() {</div>
<div class="line">  std::ostringstream oss;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> now = std::chrono::system_clock::now();</div>
<div class="line">  <span class="keyword">const</span> std::time_t time = std::chrono::system_clock::to_time_t(now);</div>
<div class="line">  oss &lt;&lt; <span class="stringliteral">&quot;current time: &quot;</span> &lt;&lt; std::put_time(std::localtime(&amp;time), <span class="stringliteral">&quot;%Y-%m-%d %H:%M:%S&quot;</span>) &lt;&lt; <span class="stringliteral">&quot; - &quot;</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Get current git branch</span></div>
<div class="line">  std::string gitInfo = exec(<span class="stringliteral">&quot;git rev-parse --abbrev-ref HEAD&quot;</span>);</div>
<div class="line">  gitInfo.erase(std::remove(gitInfo.begin(), gitInfo.end(), <span class="charliteral">&#39;\n&#39;</span>), gitInfo.cend());</div>
<div class="line">  oss &lt;&lt; <span class="stringliteral">&quot;git: &quot;</span> &lt;&lt; gitInfo &lt;&lt; <span class="stringliteral">&quot; - &quot;</span>;</div>
<div class="line">  <span class="comment">// Get current git commit hash</span></div>
<div class="line">  std::string gitHash = exec(<span class="stringliteral">&quot;git rev-parse --short HEAD&quot;</span>);</div>
<div class="line">  gitHash.erase(std::remove(gitHash.begin(), gitHash.end(), <span class="charliteral">&#39;\n&#39;</span>), gitHash.cend());</div>
<div class="line">  oss &lt;&lt; gitHash;</div>
<div class="line"> </div>
<div class="line">  std::string temp = oss.str();</div>
<div class="line">  <span class="comment">// Remove any extra newlines from the final string</span></div>
<div class="line">  temp.erase(std::remove(temp.begin(), temp.end(), <span class="charliteral">&#39;\n&#39;</span>), temp.end());</div>
<div class="line">  <span class="keywordflow">return</span> temp;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">std::pair&lt;UncertaintyBound, UncertaintyBound&gt; measure_error(</div>
<div class="line">    <span class="keyword">const</span> std::vector&lt;double&gt;&amp; surrogate_values, <span class="keyword">const</span> std::vector&lt;double&gt;&amp; original_values) {</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceparabolasimple.html#ab99ce26cc2701c57058400a55a61c906">samples</a> = surrogate_values.size();</div>
<div class="line">  assert(surrogate_values.size() == original_values.size());</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">size_t</span> pf_count = 0;</div>
<div class="line">  <span class="keywordtype">size_t</span> pm_count = 0;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; <a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a> &lt; <a class="code hl_variable" href="namespaceparabolasimple.html#ab99ce26cc2701c57058400a55a61c906">samples</a>; ++<a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a>) {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> surrogate_value = surrogate_values[<a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a>];</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> original_value = original_values[<a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a>];</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Count as failure if surrogate &lt; 0</span></div>
<div class="line">    pf_count += <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(surrogate_value &lt; 0);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Count as mismatch if signs are different (XOR)</span></div>
<div class="line">    pm_count += <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>((surrogate_value &lt; 0) ^ (original_value &lt; 0));</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">const</span> UncertaintyBound pf = UncertaintyBound(pf_count, samples);</div>
<div class="line">  <span class="keyword">const</span> UncertaintyBound pm = UncertaintyBound(pm_count, samples);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> std::make_pair(pf, pm);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">std::pair&lt;UncertaintyBound, UncertaintyBound&gt; single_run(</div>
<div class="line">    <span class="keyword">const</span> std::vector&lt;sgpp::base::DataVector&gt;&amp; points,</div>
<div class="line">    <span class="keyword">const</span> std::vector&lt;double&gt;&amp; real_function_values, <span class="keyword">const</span> Hyperparameters&amp; hyperparameters,</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">size_t</span> dimension, <span class="keyword">const</span> <span class="keywordtype">size_t</span> bSplineDegree, <span class="keyword">const</span> <span class="keywordtype">size_t</span> maxGridPoints) {</div>
<div class="line">  std::unique_ptr&lt;sgpp::base::ScalarFunction&gt; function =</div>
<div class="line">      std::make_unique&lt;sgpp::optimization::test_problems::RastriginObjective&gt;(dimension);</div>
<div class="line"> </div>
<div class="line">  std::unique_ptr&lt;sgpp::base::Grid&gt; <a class="code hl_function" href="multHPX_8cpp.html#ae871abe991ec98e4b1c09a6eaa9f1ddc">grid</a>(</div>
<div class="line">      <a class="code hl_function" href="classsgpp_1_1base_1_1Grid.html#a719923be7c8f5808bf4559d039ae76d1">sgpp::base::Grid::createBsplineGrid</a>(dimension, bSplineDegree));</div>
<div class="line"> </div>
<div class="line">  std::vector&lt;std::pair&lt;double, double&gt;&gt; domain(dimension);</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> t = 0; t &lt; dimension; ++t) {</div>
<div class="line">    domain[t] = std::make_pair(0.0, 1.0);</div>
<div class="line">  }</div>
<div class="line">  <a class="code hl_class" href="classsgpp_1_1optimization_1_1IterativeGridGeneratorFullAdaptiveRitterNovak.html">sgpp::optimization::IterativeGridGeneratorFullAdaptiveRitterNovak</a> gridGen(</div>
<div class="line">      *function, *<a class="code hl_function" href="multHPX_8cpp.html#ae871abe991ec98e4b1c09a6eaa9f1ddc">grid</a>, maxGridPoints, hyperparameters, domain);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (!gridGen.generate()) {</div>
<div class="line">    <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Grid generation failed, exiting&quot;</span>);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">const</span> <a class="code hl_class" href="classsgpp_1_1base_1_1DataVector.html">sgpp::base::DataVector</a> <a class="code hl_variable" href="multHPX_8cpp.html#afaae4b3ccddbff855673417650052c63">alpha</a> = gridGen.getAlpha();</div>
<div class="line"> </div>
<div class="line">  std::unique_ptr&lt;sgpp::base::OperationEval&gt; opEval(</div>
<div class="line">      <a class="code hl_function" href="namespacesgpp_1_1op__factory.html#af740c8a004c77b5eb2102ca45dae98e5">sgpp::op_factory::createOperationEvalNaive</a>(*<a class="code hl_function" href="multHPX_8cpp.html#ae871abe991ec98e4b1c09a6eaa9f1ddc">grid</a>));</div>
<div class="line">  <span class="comment">// Create a lambda function for surrogate model evaluation</span></div>
<div class="line">  <span class="keyword">const</span> std::function&lt;double(<span class="keyword">const</span> <a class="code hl_class" href="classsgpp_1_1base_1_1DataVector.html">sgpp::base::DataVector</a>&amp;)&gt; surrogate_lambda =</div>
<div class="line">      [&amp;<a class="code hl_variable" href="multHPX_8cpp.html#afaae4b3ccddbff855673417650052c63">alpha</a>, &amp;opEval](<span class="keyword">const</span> <a class="code hl_class" href="classsgpp_1_1base_1_1DataVector.html">sgpp::base::DataVector</a>&amp; coordinates) {</div>
<div class="line">        <span class="keywordflow">return</span> opEval-&gt;eval(<a class="code hl_variable" href="multHPX_8cpp.html#afaae4b3ccddbff855673417650052c63">alpha</a>, coordinates);</div>
<div class="line">      };</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceparabolasimple.html#ab99ce26cc2701c57058400a55a61c906">samples</a> = points.size();</div>
<div class="line">  std::vector&lt;double&gt; surrogate_values(samples, 0.0);</div>
<div class="line">  <span class="comment">// Evaluate the surrogate model at all test points</span></div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; <a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a> &lt; <a class="code hl_variable" href="namespaceparabolasimple.html#ab99ce26cc2701c57058400a55a61c906">samples</a>; ++<a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a>) {</div>
<div class="line">    surrogate_values[<a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a>] = surrogate_lambda(points[i]);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> measure_error(surrogate_values, real_function_values);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">std::pair&lt;double, UncertaintyBound&gt; inversePfcalculation(</div>
<div class="line">    <span class="keyword">const</span> std::vector&lt;sgpp::base::DataVector&gt;&amp; points,</div>
<div class="line">    <span class="keyword">const</span> std::function&lt;<span class="keywordtype">double</span>(<span class="keyword">const</span> <a class="code hl_class" href="classsgpp_1_1base_1_1DataVector.html">sgpp::base::DataVector</a>&amp;)&gt; function, <span class="keyword">const</span> <span class="keywordtype">double</span> pf) {</div>
<div class="line">  assert(0 &lt; points.size());</div>
<div class="line">  <span class="keywordflow">if</span> (pf &lt; 0 || 1 &lt; pf) {</div>
<div class="line">    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;function_pf must be in [0, 1]&quot;</span>);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Calculate the index corresponding to the pf quantile</span></div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">size_t</span> pf_count =</div>
<div class="line">      <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(std::round(pf * (<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(points.size()) - 1)));</div>
<div class="line"> </div>
<div class="line">  std::vector&lt;double&gt; values;</div>
<div class="line">  values.reserve(points.size());</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code hl_class" href="classsgpp_1_1base_1_1DataVector.html">sgpp::base::DataVector</a>&amp; coordinate : points) {</div>
<div class="line">    values.push_back(function(coordinate));</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Sort values to find the quantile</span></div>
<div class="line">  std::sort(values.begin(), values.end());</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// The threshold is the value at the pf_count index</span></div>
<div class="line">  <span class="keywordflow">return</span> std::make_pair(values[pf_count], UncertaintyBound(pf_count, points.size()));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">std::ostream&amp; <a class="code hl_function" href="base_2src_2sgpp_2base_2tools_2json_2Node_8cpp.html#a662d12e45bdc25d7ea4429d5d62c8275">operator&lt;&lt;</a>(std::ostream&amp; os, <span class="keyword">const</span> std::chrono::nanoseconds&amp; nanos) {</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">size_t</span> total_seconds = std::chrono::duration_cast&lt;std::chrono::seconds&gt;(nanos).count();</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">size_t</span> seconds = total_seconds % 60;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">size_t</span> total_minutes = total_seconds / 60;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">size_t</span> minutes = total_minutes % 60;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">size_t</span> total_hours = total_minutes / 60;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">size_t</span> hours = total_hours % 24;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">size_t</span> days = total_hours / 24;</div>
<div class="line"> </div>
<div class="line">  os &lt;&lt; days &lt;&lt; <span class="stringliteral">&quot;d &quot;</span> &lt;&lt; hours &lt;&lt; <span class="stringliteral">&quot;h &quot;</span> &lt;&lt; minutes &lt;&lt; <span class="stringliteral">&quot;m &quot;</span> &lt;&lt; seconds &lt;&lt; <span class="stringliteral">&quot;s&quot;</span>;</div>
<div class="line">  <span class="keywordflow">return</span> os;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> calculateOptimalHyperparameters() {</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">size_t</span> dimension = 2;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">size_t</span> bSplineDegree = 3;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">size_t</span> maxGridPoints = 50;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespacechess.html#aff743a0e14a7729a60182924b45f750c">seed</a> = 2406;</div>
<div class="line">  <span class="comment">// 5 hyperparameters will be optimized, resulting in 6 leaf weights</span></div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">size_t</span> number_hyperparameters = 5;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">size_t</span> maxSamples = 100000;</div>
<div class="line"> </div>
<div class="line">  bayesopt::Parameters parameters;</div>
<div class="line">  parameters.n_init_samples = 50;</div>
<div class="line">  parameters.n_iterations = 150;</div>
<div class="line">  parameters.random_seed = <a class="code hl_variable" href="namespacechess.html#aff743a0e14a7729a60182924b45f750c">seed</a>;</div>
<div class="line">  parameters.noise = 1e-10;</div>
<div class="line">  <span class="comment">// Use a combination of criteria for robust optimization</span></div>
<div class="line">  parameters.crit_name = <span class="stringliteral">&quot;cHedge(cEI,cLCB,cExpReturn,cOptimisticSampling)&quot;</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> start = std::chrono::system_clock::now();</div>
<div class="line"> </div>
<div class="line">  std::ofstream protocol{<span class="stringliteral">&quot;hyperparameter_optimisation.protocol&quot;</span>};</div>
<div class="line">  protocol &lt;&lt; project_info() &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">  std::unique_ptr&lt;sgpp::base::ScalarFunction&gt; real_function =</div>
<div class="line">      std::make_unique&lt;sgpp::optimization::test_problems::RastriginObjective&gt;(2);</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">const</span> std::function&lt;double(<span class="keyword">const</span> <a class="code hl_class" href="classsgpp_1_1base_1_1DataVector.html">sgpp::base::DataVector</a>&amp;)&gt; real_function_lambda =</div>
<div class="line">      [&amp;](<span class="keyword">const</span> <a class="code hl_class" href="classsgpp_1_1base_1_1DataVector.html">sgpp::base::DataVector</a>&amp; x) { <span class="keywordflow">return</span> real_function-&gt;eval(x); };</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Generate a large set of random points for testing</span></div>
<div class="line">  std::vector&lt;sgpp::base::DataVector&gt; points(maxSamples, <a class="code hl_class" href="classsgpp_1_1base_1_1DataVector.html">sgpp::base::DataVector</a>(dimension));</div>
<div class="line">  std::mt19937 gen(seed);</div>
<div class="line">  std::uniform_real_distribution&lt;&gt; dis(0.0, 1.0);</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; <a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a> &lt; maxSamples; ++<a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a>) {</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> d = 0; d &lt; dimension; ++d) {</div>
<div class="line">      points[<a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a>][d] = dis(gen);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Pre-calculate real function values at these points</span></div>
<div class="line">  std::vector&lt;double&gt; real_function_values(maxSamples, 0.0);</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; <a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a> &lt; maxSamples; ++<a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a>) {</div>
<div class="line">    real_function_values[<a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a>] = real_function_lambda(points[i]);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create a set of test functions with different failure probability thresholds</span></div>
<div class="line">  std::vector&lt;std::pair&lt;double, UncertaintyBound&gt;&gt; test_functions{};</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 1; <a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a> &lt;= 7; ++<a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a>) {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> pf = 1.0 / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(1 &lt;&lt; <a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a>);  <span class="comment">// 1/2, 1/4, ..., 1/128</span></div>
<div class="line">    test_functions.push_back(inversePfcalculation(points, real_function_lambda, pf));</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;run hyperparameter optimisation for &quot;</span> &lt;&lt; test_functions.size() &lt;&lt; <span class="stringliteral">&quot; functions&quot;</span></div>
<div class="line">            &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">double</span> current_best_value = std::numeric_limits&lt;double&gt;::infinity();</div>
<div class="line">  Hyperparameters current_best_gamma{};</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// This is the objective function for bayesopt</span></div>
<div class="line">  <span class="keyword">const</span> std::function&lt;double(<span class="keyword">const</span> vectord&amp;)&gt;&amp; evalFunc = [&amp;](<span class="keyword">const</span> vectord&amp; p_old) {</div>
<div class="line">    <span class="comment">// p_old has 5 values (split probabilities)</span></div>
<div class="line">    std::vector&lt;double&gt; <a class="code hl_variable" href="namespacefriedman.html#ac1dc8c3cf547e301788ad512096f9abc">p</a>(p_old.size() + 1);  <span class="comment">// p will have 6 values (leaf weights)</span></div>
<div class="line">    transformWeights(p_old, p, 1.0, 0);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> Hyperparameters hyperparameters{<a class="code hl_variable" href="namespacefriedman.html#ac1dc8c3cf547e301788ad512096f9abc">p</a>[0], <a class="code hl_variable" href="namespacefriedman.html#ac1dc8c3cf547e301788ad512096f9abc">p</a>[1], <a class="code hl_variable" href="namespacefriedman.html#ac1dc8c3cf547e301788ad512096f9abc">p</a>[2], <a class="code hl_variable" href="namespacefriedman.html#ac1dc8c3cf547e301788ad512096f9abc">p</a>[3], <a class="code hl_variable" href="namespacefriedman.html#ac1dc8c3cf547e301788ad512096f9abc">p</a>[4], <a class="code hl_variable" href="namespacefriedman.html#ac1dc8c3cf547e301788ad512096f9abc">p</a>[5]};</div>
<div class="line"> </div>
<div class="line">    std::vector&lt;std::tuple&lt;UncertaintyBound, UncertaintyBound, UncertaintyBound&gt;&gt; results(</div>
<div class="line">        test_functions.size());</div>
<div class="line">    <span class="comment">// Run single_run for each test function in parallel</span></div>
<div class="line"><span class="preprocessor">#pragma omp parallel for</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; <a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a> &lt; test_functions.size(); ++<a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a>) {</div>
<div class="line">      std::pair&lt;UncertaintyBound, UncertaintyBound&gt; pf_pm_result = single_run(</div>
<div class="line">          points, real_function_values, hyperparameters, dimension, bSplineDegree, maxGridPoints);</div>
<div class="line">      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; surrogate_pf = pf_pm_result.first;</div>
<div class="line">      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; surrogate_pm = pf_pm_result.second;</div>
<div class="line">      <span class="comment">// Calculate relative mismatch probability</span></div>
<div class="line">      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; surrogate_prm = surrogate_pm.div(test_functions[i].second);</div>
<div class="line"> </div>
<div class="line">      results[<a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a>] = std::make_tuple(surrogate_pf, surrogate_pm, surrogate_prm);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// This counter is static, it persists across calls to evalFunc</span></div>
<div class="line">    <span class="comment">// It is safe because it&#39;s outside the parallel loop</span></div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceanalyse__erg.html#a0c45205136252302476ec45a1336552e">counter</a> = 0;</div>
<div class="line">    protocol &lt;&lt; <span class="stringliteral">&quot;# counter: &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespaceanalyse__erg.html#a0c45205136252302476ec45a1336552e">counter</a>++ &lt;&lt; <span class="stringliteral">&quot; / &quot;</span></div>
<div class="line">             &lt;&lt; (parameters.n_init_samples + parameters.n_iterations) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">    protocol &lt;&lt; hyperparameters &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Calculate the average relative mismatch error</span></div>
<div class="line">    <span class="keywordtype">double</span> total_error = 0;</div>
<div class="line">    <span class="keywordtype">size_t</span> entries = 0;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; <a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a> &lt; test_functions.size(); ++<a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a>) {</div>
<div class="line">      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; result_tuple = results[<a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a>];</div>
<div class="line">      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; pf = std::get&lt;0&gt;(result_tuple);</div>
<div class="line">      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; pm = std::get&lt;1&gt;(result_tuple);</div>
<div class="line">      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; prm = std::get&lt;2&gt;(result_tuple);</div>
<div class="line"> </div>
<div class="line">      total_error += prm.value();</div>
<div class="line">      ++entries;</div>
<div class="line"> </div>
<div class="line">      protocol &lt;&lt; test_functions[<a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a>].first &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; test_functions[<a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a>].second &lt;&lt; <span class="stringliteral">&quot;: surrogate: (&quot;</span></div>
<div class="line">               &lt;&lt; pf &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; pm &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; prm &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">    total_error /= <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(entries);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Track the best hyperparameters found so far</span></div>
<div class="line">    <span class="keywordflow">if</span> (total_error &lt; current_best_value) {</div>
<div class="line">      current_best_value = total_error;</div>
<div class="line">      current_best_gamma = hyperparameters;</div>
<div class="line">    }</div>
<div class="line">    protocol &lt;&lt; <span class="stringliteral">&quot;total_error: &quot;</span> &lt;&lt; 100 * total_error</div>
<div class="line">             &lt;&lt; <span class="stringliteral">&quot;% (current best: &quot;</span> &lt;&lt; 100 * current_best_value &lt;&lt; <span class="stringliteral">&quot;%, &quot;</span> &lt;&lt; current_best_gamma</div>
<div class="line">             &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span></div>
<div class="line">             &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> total_error;</div>
<div class="line">  };</div>
<div class="line"> </div>
<div class="line">  HyperParameterFunction opt(number_hyperparameters, parameters, evalFunc);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Set bounds for the 5 split parameters to [0, 1]</span></div>
<div class="line">  vectord lb(number_hyperparameters);</div>
<div class="line">  vectord ub(number_hyperparameters);</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> t = 0; t &lt; number_hyperparameters; ++t) {</div>
<div class="line">    lb(t) = 0.0;</div>
<div class="line">    ub(t) = 1.0;</div>
<div class="line">  }</div>
<div class="line">  opt.setBoundingBox(lb, ub);</div>
<div class="line"> </div>
<div class="line">  opt.initializeOptimization();</div>
<div class="line">  <span class="comment">// Run the optimization loop</span></div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; <a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a> &lt; parameters.n_iterations; ++<a class="code hl_variable" href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">i</a>) {</div>
<div class="line">    opt.stepOptimization();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> end = std::chrono::system_clock::now();</div>
<div class="line"> </div>
<div class="line">  protocol &lt;&lt; project_info() &lt;&lt; std::endl;</div>
<div class="line">  protocol &lt;&lt; <span class="stringliteral">&quot;# duration: &quot;</span> &lt;&lt; (end - start) &lt;&lt; std::endl;</div>
<div class="line">  protocol &lt;&lt; <span class="stringliteral">&quot;# &quot;</span> &lt;&lt; parameters &lt;&lt; std::endl;</div>
<div class="line">  protocol &lt;&lt; <span class="stringliteral">&quot;best hyperparameters: &quot;</span> &lt;&lt; current_best_gamma &lt;&lt; std::endl;</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;best hyperparameters: &quot;</span> &lt;&lt; current_best_gamma &lt;&lt; std::endl;</div>
<div class="line">}</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="densityMultiplication_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>(<span class="keywordtype">int</span> argc, <span class="keyword">const</span> <span class="keywordtype">char</span>* argv[]) {</div>
<div class="line">  <span class="comment">// Silence verbose output from SG++</span></div>
<div class="line">  <a class="code hl_function" href="classsgpp_1_1base_1_1Printer.html#a5cc60c954810dc07092dd0052a6ba000">sgpp::base::Printer::getInstance</a>().<a class="code hl_function" href="classsgpp_1_1base_1_1Printer.html#a4de90f658c31985edab233cee46162a9">setVerbosity</a>(0);</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Note: For full functionality, please define USE_BAYESOPT and compile SGpp with &quot;</span></div>
<div class="line">               <span class="stringliteral">&quot;USE_LIBGP (otherwise you can also change the code to not use gaussian processes)&quot;</span></div>
<div class="line">            &lt;&lt; std::endl;</div>
<div class="line">  <span class="keywordflow">try</span> {</div>
<div class="line"><span class="preprocessor">#ifdef USE_BAYESOPT</span></div>
<div class="line">    calculateOptimalHyperparameters();</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Note: USE_BAYESOPT not defined.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Skipping calculateOptimalHyperparameters() example.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;This example requires the external library bayesopt.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;------------------------------------------------------&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;An exception occurred: &quot;</span> &lt;&lt; e.what() &lt;&lt; std::endl;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aAugmentedLagrangian_8cpp_html_ac2eaf9e806b463971eb23d43900a64be"><div class="ttname"><a href="AugmentedLagrangian_8cpp.html#ac2eaf9e806b463971eb23d43900a64be">f</a></div><div class="ttdeci">base::ScalarFunction &amp; f</div><div class="ttdef"><b>Definition</b> AugmentedLagrangian.cpp:75</div></div>
<div class="ttc" id="aAuto_8hpp_html"><div class="ttname"><a href="Auto_8hpp.html">Auto.hpp</a></div></div>
<div class="ttc" id="aBaseOpFactory_8hpp_html"><div class="ttname"><a href="BaseOpFactory_8hpp.html">BaseOpFactory.hpp</a></div></div>
<div class="ttc" id="aDataVector_8hpp_html"><div class="ttname"><a href="DataVector_8hpp.html">DataVector.hpp</a></div></div>
<div class="ttc" id="aGrid_8hpp_html"><div class="ttname"><a href="Grid_8hpp.html">Grid.hpp</a></div></div>
<div class="ttc" id="aHierarchisationSLE_8hpp_html"><div class="ttname"><a href="HierarchisationSLE_8hpp.html">HierarchisationSLE.hpp</a></div></div>
<div class="ttc" id="aIterativeGridGeneratorFullAdaptiveRitterNovak_8hpp_html"><div class="ttname"><a href="IterativeGridGeneratorFullAdaptiveRitterNovak_8hpp.html">IterativeGridGeneratorFullAdaptiveRitterNovak.hpp</a></div></div>
<div class="ttc" id="aIterativeGridGeneratorRitterNovak_8hpp_html"><div class="ttname"><a href="IterativeGridGeneratorRitterNovak_8hpp.html">IterativeGridGeneratorRitterNovak.hpp</a></div></div>
<div class="ttc" id="aPrinter_8hpp_html"><div class="ttname"><a href="Printer_8hpp.html">Printer.hpp</a></div></div>
<div class="ttc" id="aRastrigin_8hpp_html"><div class="ttname"><a href="Rastrigin_8hpp.html">Rastrigin.hpp</a></div></div>
<div class="ttc" id="aScalarFunction_8hpp_html"><div class="ttname"><a href="ScalarFunction_8hpp.html">ScalarFunction.hpp</a></div></div>
<div class="ttc" id="abase_2src_2sgpp_2base_2tools_2json_2Node_8cpp_html_a662d12e45bdc25d7ea4429d5d62c8275"><div class="ttname"><a href="base_2src_2sgpp_2base_2tools_2json_2Node_8cpp.html#a662d12e45bdc25d7ea4429d5d62c8275">operator&lt;&lt;</a></div><div class="ttdeci">std::ostream &amp; operator&lt;&lt;(std::ostream &amp;stream, json::Node &amp;node)</div><div class="ttdef"><b>Definition</b> Node.cpp:252</div></div>
<div class="ttc" id="aclasssgpp_1_1base_1_1DataVector_html"><div class="ttname"><a href="classsgpp_1_1base_1_1DataVector.html">sgpp::base::DataVector</a></div><div class="ttdoc">A class to store one-dimensional data.</div><div class="ttdef"><b>Definition</b> DataVector.hpp:25</div></div>
<div class="ttc" id="aclasssgpp_1_1base_1_1Grid_html_a719923be7c8f5808bf4559d039ae76d1"><div class="ttname"><a href="classsgpp_1_1base_1_1Grid.html#a719923be7c8f5808bf4559d039ae76d1">sgpp::base::Grid::createBsplineGrid</a></div><div class="ttdeci">static Grid * createBsplineGrid(size_t dim, size_t degree)</div><div class="ttdoc">creates a B-spline grid</div><div class="ttdef"><b>Definition</b> Grid.cpp:127</div></div>
<div class="ttc" id="aclasssgpp_1_1base_1_1Printer_html_a4de90f658c31985edab233cee46162a9"><div class="ttname"><a href="classsgpp_1_1base_1_1Printer.html#a4de90f658c31985edab233cee46162a9">sgpp::base::Printer::setVerbosity</a></div><div class="ttdeci">void setVerbosity(int level)</div><div class="ttdef"><b>Definition</b> Printer.hpp:175</div></div>
<div class="ttc" id="aclasssgpp_1_1base_1_1Printer_html_a5cc60c954810dc07092dd0052a6ba000"><div class="ttname"><a href="classsgpp_1_1base_1_1Printer.html#a5cc60c954810dc07092dd0052a6ba000">sgpp::base::Printer::getInstance</a></div><div class="ttdeci">static Printer &amp; getInstance()</div><div class="ttdef"><b>Definition</b> Printer.cpp:43</div></div>
<div class="ttc" id="aclasssgpp_1_1optimization_1_1IGGFARNHelper_1_1Hyperparameters_html"><div class="ttname"><a href="classsgpp_1_1optimization_1_1IGGFARNHelper_1_1Hyperparameters.html">sgpp::optimization::IGGFARNHelper::Hyperparameters</a></div><div class="ttdoc">Stores and normalizes the hyperparameters for the refinement criterion.</div><div class="ttdef"><b>Definition</b> IterativeGridGeneratorFullAdaptiveRitterNovak.hpp:35</div></div>
<div class="ttc" id="aclasssgpp_1_1optimization_1_1IGGFARNHelper_1_1UncertaintyBound_html"><div class="ttname"><a href="classsgpp_1_1optimization_1_1IGGFARNHelper_1_1UncertaintyBound.html">sgpp::optimization::IGGFARNHelper::UncertaintyBound</a></div><div class="ttdoc">A class to represent a value with uncertainty bounds, typically from sampling.</div><div class="ttdef"><b>Definition</b> IterativeGridGeneratorFullAdaptiveRitterNovak.hpp:78</div></div>
<div class="ttc" id="aclasssgpp_1_1optimization_1_1IterativeGridGeneratorFullAdaptiveRitterNovak_html"><div class="ttname"><a href="classsgpp_1_1optimization_1_1IterativeGridGeneratorFullAdaptiveRitterNovak.html">sgpp::optimization::IterativeGridGeneratorFullAdaptiveRitterNovak</a></div><div class="ttdoc">Iterative grid generation based on a modified, fully adaptive Ritter/Novak's refinement criterion.</div><div class="ttdef"><b>Definition</b> IterativeGridGeneratorFullAdaptiveRitterNovak.hpp:203</div></div>
<div class="ttc" id="adensityMultiplication_8cpp_html_ae66f6b31b5ad750f1fe042a706a4e3d4"><div class="ttname"><a href="densityMultiplication_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a></div><div class="ttdeci">int main()</div><div class="ttdef"><b>Definition</b> densityMultiplication.cpp:22</div></div>
<div class="ttc" id="amultHPX_8cpp_html_ae871abe991ec98e4b1c09a6eaa9f1ddc"><div class="ttname"><a href="multHPX_8cpp.html#ae871abe991ec98e4b1c09a6eaa9f1ddc">grid</a></div><div class="ttdeci">std::unique_ptr&lt; sgpp::base::Grid &gt; grid(nullptr)</div></div>
<div class="ttc" id="amultHPX_8cpp_html_afaae4b3ccddbff855673417650052c63"><div class="ttname"><a href="multHPX_8cpp.html#afaae4b3ccddbff855673417650052c63">alpha</a></div><div class="ttdeci">sgpp::base::DataVector alpha</div><div class="ttdef"><b>Definition</b> multHPX.cpp:40</div></div>
<div class="ttc" id="anamespaceanalyse__erg_html_a0c45205136252302476ec45a1336552e"><div class="ttname"><a href="namespaceanalyse__erg.html#a0c45205136252302476ec45a1336552e">analyse_erg.counter</a></div><div class="ttdeci">int counter</div><div class="ttdef"><b>Definition</b> analyse_erg.py:27</div></div>
<div class="ttc" id="anamespacechess_html_aff743a0e14a7729a60182924b45f750c"><div class="ttname"><a href="namespacechess.html#aff743a0e14a7729a60182924b45f750c">chess.seed</a></div><div class="ttdeci">int seed</div><div class="ttdef"><b>Definition</b> chess.py:12</div></div>
<div class="ttc" id="anamespacefriedman_html_ac1dc8c3cf547e301788ad512096f9abc"><div class="ttname"><a href="namespacefriedman.html#ac1dc8c3cf547e301788ad512096f9abc">friedman.p</a></div><div class="ttdeci">p</div><div class="ttdef"><b>Definition</b> friedman.mod.py:52</div></div>
<div class="ttc" id="anamespaceparabolasimple_html_ab99ce26cc2701c57058400a55a61c906"><div class="ttname"><a href="namespaceparabolasimple.html#ab99ce26cc2701c57058400a55a61c906">parabolasimple.samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition</b> parabolasimple.py:16</div></div>
<div class="ttc" id="anamespacepython_1_1statsfileInfo_html_a9a8efd87cb6a3ce6e2172b480821c70c"><div class="ttname"><a href="namespacepython_1_1statsfileInfo.html#a9a8efd87cb6a3ce6e2172b480821c70c">python.statsfileInfo.i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition</b> statsfileInfo.py:101</div></div>
<div class="ttc" id="anamespacesgpp_1_1op__factory_html_af740c8a004c77b5eb2102ca45dae98e5"><div class="ttname"><a href="namespacesgpp_1_1op__factory.html#af740c8a004c77b5eb2102ca45dae98e5">sgpp::op_factory::createOperationEvalNaive</a></div><div class="ttdeci">base::OperationEval * createOperationEvalNaive(base::Grid &amp;grid)</div><div class="ttdoc">Factory method, returning an OperationEval for the grid at hand.</div><div class="ttdef"><b>Definition</b> BaseOpFactory.cpp:696</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="examples.html">Usage Examples</a></li><li class="navelem"><a class="el" href="examples_cpp.html">C++ Examples</a></li>
    <li class="footer">Generated on Fri Nov 14 2025 00:25:07 for SG++-Doxygen-Documentation by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
